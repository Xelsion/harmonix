<?php

use system\System;

$this->set("title", "Rollen");

$role_list = $this->get("result_list");
?>
<div class="container-fluid">
	<h1>Rollen</h1>
	<table class="table table-dark table-striped">
		<tr>
			<th>ID</th>
			<th class="col-md-2">Name</th>
			<th>Unterrolle von</th>
			<th>Rechte: Alle</th>
			<th>Rechte: Gruppe</th>
			<th>Rechte: Eigene</th>
			<th>Gesch&uuml;tzt</th>
			<th class="col-md-2 text-end">Optionen</th>
		</tr>
		<?php foreach( $role_list as $role ):
			$parent = $role->getParent();
			$rights = $role->getStringArray();
			?>
			<tr>
				<td><?= escaped_html($role->id) ?></td>
				<td><?= escaped_html($role->name) ?></td>
				<td><?= ( !is_null($parent) ) ? escaped_html($parent->name) : "- keine -" ?></td>
				<td><?= escaped_html(implode(", ", $rights["all"])) ?></td>
				<td><?= escaped_html(implode(", ", $rights["group"])) ?></td>
				<td><?= escaped_html(implode(", ", $rights["own"])) ?></td>
				<td><?= ($role->is_protected) ? "Ja" : "Nein" ?></td>
				<td class="text-nowrap text-end">
					<a href="/actor-roles/<?= $role->id ?>" class="button button-default"><?= System::$Core->lang->getValue("translations", "edit") ?></a>
					<a href="/actor-roles/delete/<?= $role->id ?>" class="button button-negativ"><?= System::$Core->lang->getValue("translations", "delete") ?></a>
				</td>
			</tr>
		<?php endforeach; ?>
	</table>
</div>
